<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knew you would say yes!</title>
    <link rel="stylesheet" href="./yes_style.css">
</head>
<body>
    <div class="container">
        <h1 class="header_text"></h1>
        <div class="gif_container">
            <img src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExMmo3c3l5ODh3ZGN6NHhhaDE2Mjg1ZjkwOXczdDFxbWM3dTBtaW9zaiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/9XY4f3FgFTT4QlaYqa/giphy.gif">
        </div>
    </div>
    <script>
    // Mảng các câu sẽ random — sửa/thêm/cập nhật các câu ở đây
    const messages = [
      "Knew you would say yes!",
      "abc",
      "Huy_ST5K",
      "Huy_Donglucluong",
      "Huy_deptrai",
      "Huy_damdang",
      "Huy_Handsome"
    ];

    // Hàm chọn ngẫu nhiên nhưng cố gắng khác với lần trước (lưu trong localStorage)
    function pickRandomIndex(arrayLength) {
      if (arrayLength === 0) return 0;
      const prev = parseInt(localStorage.getItem('lastHeaderIndex'), 10);
      let idx = Math.floor(Math.random() * arrayLength);
      if (arrayLength > 1 && !Number.isNaN(prev)) {
        let tries = 0;
        while (idx === prev && tries < 10) {
          idx = Math.floor(Math.random() * arrayLength);
          tries++;
        }
      }
      return idx;
    }

    function randomizeHeader() {
      const header = document.querySelector('.header_text');
      if (!header) return;

      // Nếu bạn muốn dùng danh sách câu trực tiếp từ HTML (ví dụ data-messages),
      // có thể parse ở đây thay vì dùng mảng messages.

      const idx = pickRandomIndex(messages.length);
      header.textContent = messages[idx];
      localStorage.setItem('lastHeaderIndex', idx);

      // Hiệu ứng: thêm class, sau đó bật class "show" để kích hoạt transition
      header.classList.add('fade-in');
      // dùng setTimeout để cho phép browser áp dụng class trước khi thêm 'show'
      requestAnimationFrame(() => {
        header.classList.add('show');
      });
      // Sau animation xong (450ms), remove các class để lần sau vẫn chạy được
      setTimeout(() => {
        header.classList.remove('fade-in', 'show');
      }, 600);
    }

    document.addEventListener('DOMContentLoaded', randomizeHeader);
  </script>
</body>
</html>
